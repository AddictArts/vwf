<!-- Copyright 2014, SRI International -->
<html>
  <script type="text/javascript" src="vwf/model/threejs/three.js"></script>
  <script type="text/javascript" src="vwf/model/threejs/js/loaders/ColladaLoader.js"></script>
  <script type="text/javascript" src="js/tow.js"></script>
  <script type="text/javascript" src="js/dat.gui.min.js"></script>
  <script>
TOW.Camera.position.set(-0.25, 0, 0.125); //XXX make dat gui able to set this vector maybe
// TOW.Camera.position.set(-10, 5, 5);
TOW.Camera.lookAt(new THREE.Vector3(0, 0, 0));
TOW.addLight().position.set(-1, 0.5, 0.5);
TOW.addLight({ type: 'Ambient' });
TOW.addGrid(14, 0.125, 0x303030);
// TOW.loadColladas([ 'models/xyzbar.dae', 'models/M4_Environment_01.dae', 'models/M4_v09.dae' ], function(obj3Ds) {
TOW.loadColladas([ 'models/xyzbar.dae', 'models/M4_Environment_01.dae' ], function(obj3Ds) {
  TOW.ColladaScenes.xyzbar_dae.scale.set(0.005, 0.005, 0.005);
  TOW.hideSceneChildren(TOW.ColladaScenes.M4_Environment_01_dae);
});
  </script>

  <script>
var TowDatMenu = function() {
  this.cameraPosition = 0;
  this.targets = function() {
    // TOW.clearOnRenders();

    var mesh = TOW.unhideSceneMesh('targets', TOW.ColladaScenes.M4_Environment_01_dae);

    TOW.centerGeometryOffsetPivot(mesh);
    // TOW.centerGeometry(mesh);
    // TOW.centerGeometry(mesh, TOW.ColladaScenes.M4_Environment_01_dae);
    TOW.render(function() {
      mesh.parent.parent.rotation.y += 0.005;
      // mesh.rotation.y += 0.005;
    });
  };
  this.ShootingRangeArea8 = function() {
    // TOW.clearOnRenders();

    var mesh = TOW.unhideSceneMesh('ShootingRangeArea8', TOW.ColladaScenes.M4_Environment_01_dae);

    TOW.centerGeometryOffsetPivot(mesh);
    // TOW.centerGeometry(mesh);
    // TOW.centerGeometry(mesh, TOW.ColladaScenes.M4_Environment_01_dae);
    TOW.render(function() {
      mesh.parent.parent.rotation.y += 0.005;
      // mesh.rotation.y += 0.005;
    });
  };
  this.Trigger = function() {
  };
  this.Selector_Lever = function() {
  };
};

window.onload = function() {
  var towDatMenu = new TowDatMenu();
  var towDatGUI = new dat.GUI();

  towDatGUI.add(towDatMenu, 'cameraPosition');
  towDatGUI.add(towDatMenu, 'targets');
  towDatGUI.add(towDatMenu, 'ShootingRangeArea8');
}
  </script>
<body>
</body>
</html>
