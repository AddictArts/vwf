<html>
  <head>
    <title>Exercise UI</title>
    <script type="text/javascript" src="../js/dat.gui.min.js"></script>

<!--
https://dat-gui.googlecode.com/git-history/dbb4fa0ef0428380044e825470e788dec1e37b86/index.html
You can instantiate multiple DAT.GUI objects and name them however you'd like.

var gui1 = new DAT.GUI();
var gui2 = new DAT.GUI();

// The name function overwrites the 'Show Controls' text.
gui1.name('Utilities');
gui2.name('Camera Placement');
By default, DAT.GUI panels will be automatically added to the HTML document and fixed to the top of the screen from right to left. You can disable this behavior and append the gui DOM element to a container of your choosing.

// Notice this belongs to the DAT.GUI class (uppercase)
// and not an instance thereof.
DAT.GUI.autoPlace = false;

var gui = new DAT.GUI();

// Do some custom styles ...
gui.domElement.style.position = 'absolute';
gui.domElement.style.top = '20px';
gui.domElement.style.left = '20px';

document.getElementById('my-gui-container').appendChild( gui.domElement );

========

http://brm.io/dat-gui-light-theme/
https://github.com/liabru/dat-gui-light-theme

.dg.main.taller-than-window .close-button {
    border-top: 1px solid #ddd;
}

.dg.main .close-button {
    background-color: #ccc;
}
 
.dg.main .close-button:hover {
    background-color: #ddd;
}

.dg {
    color: #555;
    text-shadow: none !important;
}

.dg.main::-webkit-scrollbar {
    background: #fafafa;
}

.dg.main::-webkit-scrollbar-thumb {
    background: #bbb;
}
 
.dg li:not(.folder) {
    background: #fafafa;
    border-bottom: 1px solid #ddd;
}
 
.dg li.save-row .button {
    text-shadow: none !important;
}

.dg li.title {
    background: #e8e8e8 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;
}

.dg .cr.function:hover,.dg .cr.boolean:hover {
    background: #fff;
}
 
.dg .c input[type=text] {
    background: #e9e9e9;
}
 
.dg .c input[type=text]:hover {
    background: #eee;
}
 
.dg .c input[type=text]:focus {
    background: #eee;
    color: #555;
}
 
.dg .c .slider {
    background: #e9e9e9;
}

.dg .c .slider:hover {
    background: #eee;
}


-->


    <script type="text/javascript">
      (function() {
      var vwf = {
        m4_CarbineID: undefined,
        cameraID: undefined,
        appID: vwf_view.kernel.application()
      };

      var M4 = {
        gui: undefined,
        tray: undefined,
        guiref: { },
        Tooltray: function() {
          this.backendtxrxMsg = false;
          this.cameraOrbit = 0;
          this.cameraZoom = 0;
          this.reset = M4.reset;

          this.m4Carbine = function() {
            M4.gui.remove(M4.guiref.m4c);
            vwf_view.kernel.callMethod(vwf.appID, 'instance', [ ]);
            M4.tray.PointWeaponInSafeDirection = M4.PointWeaponInSafeDirection;
            M4.gui.add(M4.tray, 'PointWeaponInSafeDirection').name('Position Weapon');
            M4.addSelectorLeverActionGroup();
            M4.tray.PushMagazineReleaseButton = M4.PushMagazineReleaseButton;
            M4.gui.add(M4.tray, 'PushMagazineReleaseButton').name('Magazine Catch');

            M4.tray.PullAndHoldChargingHandle = M4.PullAndHoldChargingHandle;
            M4.gui.add(M4.tray, 'PullAndHoldChargingHandle').name('Pull And Hold Charging Handle');
            M4.tray.PushAndHoldBoltCatchBottom = M4.PushAndHoldBoltCatchBottom;
            M4.gui.add(M4.tray, 'PushAndHoldBoltCatchBottom').name('Push And Hold Bolt Catch Bottom');
            M4.tray.ReleaseChargingHandle = M4.ReleaseChargingHandle;
            M4.gui.add(M4.tray, 'ReleaseChargingHandle').name('Release Charging Handle');
            M4.tray.LetGoOfBoltCatchBottom = M4.LetGoOfBoltCatchBottom;
            M4.gui.add(M4.tray, 'LetGoOfBoltCatchBottom').name('Let Go Of Bolt Catch Bottom');

            M4.tray.assessment = M4.assessment;
            M4.gui.add(M4.tray, 'assessment').name('Assessment');
          };
        },
        reset: function() {
          //vwf_view.kernel.callMethod(vwf.appID, 'removeInstance');
          //window.location.href=window.location.href;
          //window.location.reload();
          vwf_view.kernel.callMethod(vwf.appID, 'resetBackend');
        },
        PointWeaponInSafeDirection: function() {
          vwf.m4_CarbineID = vwf.m4_CarbineID || vwf_view.kernel.find(vwf.appID, "//M4_Carbine_dae");
          vwf_view.kernel.callMethod(vwf.m4_CarbineID, 'PointWeaponInSafeDirection');
        },
        addSelectorLeverActionGroup: function() {
          var selectorLeverFolder = M4.gui.addFolder("Selecctor Lever");

          M4.tray.semi = M4.semi;
          selectorLeverFolder.add(M4.tray, 'semi').name('SEMI');
          M4.tray.safe = M4.safe;
          selectorLeverFolder.add(M4.tray, 'safe').name('SAFE');
          M4.tray.burst = M4.burst;
          selectorLeverFolder.add(M4.tray, 'burst').name('BURST');
        },
        semi: function() {
          vwf.m4_CarbineID = vwf.m4_CarbineID || vwf_view.kernel.find(vwf.appID, "//M4_Carbine_dae");
          vwf_view.kernel.callMethod(vwf.m4_CarbineID, 'SelectModeSemi');
        },
        safe: function() {
          vwf.m4_CarbineID = vwf.m4_CarbineID || vwf_view.kernel.find(vwf.appID, "//M4_Carbine_dae");
          vwf_view.kernel.callMethod(vwf.m4_CarbineID, 'SelectModeSafe');
        },
        burst: function() {
          vwf.m4_CarbineID = vwf.m4_CarbineID || vwf_view.kernel.find(vwf.appID, "//M4_Carbine_dae");
          vwf_view.kernel.callMethod(vwf.m4_CarbineID, 'SelectModeBurst');
        },
        PushMagazineReleaseButton: function() {
          vwf.m4_CarbineID = vwf.m4_CarbineID || vwf_view.kernel.find(vwf.appID, "//M4_Carbine_dae");
          vwf_view.kernel.callMethod(vwf.m4_CarbineID, 'PushMagazineReleaseButton');
        },
        PullAndHoldChargingHandle: function() {
          vwf.m4_CarbineID = vwf.m4_CarbineID || vwf_view.kernel.find(vwf.appID, "//M4_Carbine_dae");
          vwf_view.kernel.callMethod(vwf.m4_CarbineID, 'PullAndHoldChargingHandle');
        },
        PushAndHoldBoltCatchBottom: function() {
          vwf.m4_CarbineID = vwf.m4_CarbineID || vwf_view.kernel.find(vwf.appID, "//M4_Carbine_dae");
          vwf_view.kernel.callMethod(vwf.m4_CarbineID, 'PushAndHoldBoltCatchBottom');
        },
        ReleaseChargingHandle: function() {
          vwf.m4_CarbineID = vwf.m4_CarbineID || vwf_view.kernel.find(vwf.appID, "//M4_Carbine_dae");
          vwf_view.kernel.callMethod(vwf.m4_CarbineID, 'ReleaseChargingHandle');
        },
        LetGoOfBoltCatchBottom: function() {
          vwf.m4_CarbineID = vwf.m4_CarbineID || vwf_view.kernel.find(vwf.appID, "//M4_Carbine_dae");
          vwf_view.kernel.callMethod(vwf.m4_CarbineID, 'LetGoOfBoltCatchBottom');
        },
        assessment: function() {
          vwf.m4_CarbineID = vwf.m4_CarbineID || vwf_view.kernel.find(vwf.appID, "//M4_Carbine_dae");
          vwf_view.kernel.callMethod(vwf.m4_CarbineID, 'assessment');
        },
        init: function() {
          $('#backendtxrxMsg').hide();
          this.tray = new this.Tooltray();
          this.gui = new dat.GUI();
          this.gui.add(this.tray, 'reset').name('Reset');
          this.gui.add(this.tray, 'backendtxrxMsg').name('Messages').onFinishChange(function(value) {
            if (value) $('#backendtxrxMsg').show('easing');
            else $('#backendtxrxMsg').hide('easing');
          });
          this.gui.add(this.tray, 'cameraOrbit', -180, 180).name('Orbit').onChange(function(value) {
            vwf_view.kernel.callMethod(vwf.appID, "orbit", [ -value - 90 ]); // really we start at -90 behind the target, so we multiply by -1
          });
          this.gui.add(this.tray, 'cameraZoom', 0, 90).step(1).name('Zoom').onChange(function(value) {
            vwf_view.kernel.callMethod(vwf.appID, "zoom", [ value ]);
          });
          M4.guiref.m4c = this.gui.add(this.tray, 'm4Carbine').name('M4 Carbine');
        }
      };

      function SceneInitialize() {
        M4.init();

        // Property observers...
        vwf_view.satProperty = function(nodeId, propertyName, propertyValue) {
          if (nodeId == vwf.appID) {
            if (propertyName == 'backendResetSent') {
              if (propertyValue) window.location.reload(true);
            }
          }
        };

        // Event observers...
        vwf_view.firedEvent = function(nodeId, eventName, eventArgs) {
          //console.log('firedEvent arg len:' + arguments.length + ' arg0:' + arguments[ 0 ] + ' arg1:' + arguments[ 1 ] + ' arg2:' + arguments[ 2 ]);

          if (nodeId == vwf.appID) {
            switch (eventName) {
            case "pointerDown":
              console.log('Observing pointerDown in the html');
              break;
            }
          }
        };

        $(window).unload(function() { SceneDestroy(); });
      }

      function SceneDestroy() {
      }

      $(document).ready(function() { SceneInitialize(); });
      })(); //@ sourceURL=index.vwf.html
    </script>
  </head>
<body>
  <div id="wrapper" class="wrapper" style="position:absolute;left:25px;top:25px;color:white;">
    <div id="backendtxrxMsg"></div>
    <div id="assessment"></div>
  </div>
  <script type="text/javascript">
    $('#wrapper').appendTo('#vwf-root');
  </script>
</body>
</html>
