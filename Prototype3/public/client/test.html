<html>
  <head>
    <!-- script src='js/swfobject.js'></script -->
    <!-- script src='js/FABridge.js'></script -->
    <!-- script src='js/web_socket.js'></script -->
    <script>
      function init() {
        function debug(string) {
          var element = document.getElementById("debug");
          var p = document.createElement("p");
          p.appendChild(document.createTextNode(string));
          element.appendChild(p);
        }

        // ws = new WebSocket("ws://localhost:3000/ws");
        // ws = new WebSocket("ws://localhost:3000/test/socket");
        // ws = new WebSocket("ws://localhost:3000/0000000000000000/socket");
        // ws = new WebSocket( "ws://" + location.host + location.pathname.substring( 0, location.pathname.lastIndexOf("/") ) + "/socket" );
        ws = new WebSocket( "ws://" + location.host + location.pathname.substring( 0, location.pathname.lastIndexOf("/") ) + "/websocket" );
        ws.onmessage = function(evt) { debug("Message: " + evt.data); };
        ws.onclose = function() { debug("socket closed"); };
        ws.onopen = function() {
          debug("connected...");
          ws.send("hello server");
          ws.send("hello again");
        };
      };
    </script>
  </head>
  <body onload="init();">
    <div id="debug"></div>
  </body>
</html>
