<!DOCTYPE html>

<html>

  <!-- The Virtual World Framework client is a collection of scripts and a world specification   -->
  <!-- passed to an initialization call. In this sample, the world specification is provided     -->
  <!-- inline for clarity, but it is normally provided by the conference server or may be        -->
  <!-- specified as a URI and loaded from a network-visible location.                            -->

  <head>

    <title>Virtual World Framework</title>

    <!-- The Virtual World Framework makes use of the jQuery library.                            -->

    <script type="text/javascript" src="jquery-1.4.4.js"></script>

    <!-- This is the main client library. vwf.js creates a framework manager and attaches it to  -->
    <!-- the global window object as window.vwf. All access to the framework is through that     -->
    <!-- reference, and no other objects are globally visible.                                   -->

    <script type="text/javascript" src="vwf.js"></script>

    <!-- The core framework manages the simulation and synchronizes it across worlds shared by   -->
    <!-- multiple users. But, the manner in which the simulation is expressed is controlled by   -->
    <!-- extension modules. There are two flavors. Models directly control the simulation but    -->
    <!-- cannot accept external input. The model configuration is identical for all participants -->
    <!-- in a shared world. Views may accept external input -such as pointer and key events or   -->
    <!-- directives from a connection to an outside engine that is not visible to all users- but -->
    <!-- may only affect the simulation indirectly through the synchronization server.           -->

    <!-- This is the common model implementation and an example model that connects the          -->
    <!-- simulation to a WebGL scene manager.                                                    -->

    <script type="text/javascript" src="vwf-model.js"></script>
    <script type="text/javascript" src="vwf-model-javascript.js"></script>
    <script type="text/javascript" src="vwf-model-scenejs.js"></script>

    <!-- This is the common view implementation and an example view that summarizes the          -->
    <!-- simulation state in HTML on the main page.                                              -->

    <script type="text/javascript" src="vwf-view.js"></script>
    <script type="text/javascript" src="vwf-view-glge.js"></script>
    <script type="text/javascript" src="vwf-view-html.js"></script>

    <script type="text/javascript" src="vwf-view-glge/glge-compiled.js"></script> 

    <!-- With the scripts loaded, we must initialize the framework. vwf.initialize() accepts     -->
    <!-- three parameters: a world specification, model configuration parameters, and view       -->
    <!-- configuration parameters.                                                               -->

    <script type="text/javascript">
    
        vwf.initialize(

            // This is the world specification. The world may be specified using a component literal
            // as shown here, or the specification may be placed in a network-visible location and
            // specified here as a URI or as a query parameter to this index page.

            // As a literal:
            //     { extends: "http://vwf.example.com/types/example-type", properties: { ... }, ... }

            // As a string:
            //     "http://vwf.example.com/types/example-type",

            // { extends: "http://localhost:8001/test1.js" },
            // "http://localhost:8001/test1.js",

            // These are the model configurations. Each key within the configuration object is a
            // model name, and each value is an argument or an array of arguments to be passed to
            // the model's constructor.

            // With an array of arguments for the "example" model:
            //     { example: [ p1, p2, ... ], // ==> new vwf.modules.example( vwf, p1, p2, ... ) }

            // As a single argument to the "html" view:
            //     { html: "#vwf-root" // ==> new vwf.modules.html( vwf, "#vwf-root" ) }

            {
                javascript: [],         // invokes: new vwf.modules.javascript( vwf )
            },

            // These are the view configurations. They use the same format as the model
            // configurations.

            {
                glge: "#vwf-root",      // invokes: new vwf.modules.glge( vwf, "#vwf-root" )
                html: "#vwf-listing",   // invokes: new vwf.modules.html( vwf, "#vwf-listing" )
            }

        );

        jQuery( window.document ).ready( function() {

            if ( window.location.search ) {

                jQuery( "#world-selection" ).hide();

            } else {

                $( ".world-option" ).change( function() {
                    jQuery( "#world-choice" ).val( jQuery( this ).val() );
                } );

                $( "#world-selection" ).submit( function () {
                    window.location.href = window.location.protocol + "//" + window.location.host + window.location.pathname + "?world=" + jQuery( "#world-choice" ).val();
                    return false;
                } );

            }

        } );

    </script>

    <link rel="stylesheet" href="index.css" type="text/css" />

  </head>

  <body>

    <!-- Generic clients may have nearly empty pages, but pages for custom clients may be laid   -->
    <!-- out in any manner desired. Any view and models that render to the page should be        -->
    <!-- instructed where to attach their content.                                               -->

    <h1>Virtual World Framework</h1>

    <!-- The main content renders to "#vwf-root", the item with the id "vwf-root".               -->

    <div id="vwf-root"></div>

    <!-- Show a world selection form. The form is hidden if window.location contains a world     -->
    <!-- specification.                                                                          -->

    <form id="world-selection">

        <table>
            <tr>
                <td>
                    <p><label><input class="world-option" type="radio" name="world-option" value="http://localhost:8001/cityblock.js" /> City Block</label><br /></p>
                    <p><label><input class="world-option" type="radio" name="world-option" value="http://localhost:8001/test1.js" /> Duck and Plane</label></p>
                </td>
                <td>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </td>
                <td>
                    <input id="world-choice" type="text" size="50" /> <input type="submit" value="Load" />
                </td>
            </tr>
        </table>

    </form>

    <!-- The "html" view has been configured to render to "#vwf-listing".                        -->

    <div id="vwf-listing"></div>
    
  </body>

</html>
